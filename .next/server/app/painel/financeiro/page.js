(()=>{var e={};e.id=335,e.ids=[335],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var s=a(50482),r=a(69108),n=a(62563),l=a.n(n),o=a(68300),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(t,i);let c=["",{children:["painel",{children:["financeiro",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7105)),"D:\\fut7\\app\\painel\\financeiro\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,33740)),"D:\\fut7\\app\\painel\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,18073)),"D:\\fut7\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\fut7\\app\\painel\\financeiro\\page.tsx"],x="/painel/financeiro/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/painel/financeiro/page",pathname:"/painel/financeiro",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29760:(e,t,a)=>{Promise.resolve().then(a.bind(a,78129))},78129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(95344),r=a(3729),n=a(61351),l=a(16212),o=a(69436),i=a(6826),c=a(85674);let d=(0,a(97075).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=a(85814),p=a(36135);function u({numero:e,mensagem:t}){let[a,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1);async function c(){n(!0),i(!1);try{(await fetch("/api/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero:e,mensagem:t})})).ok&&i(!0)}catch(e){console.error("Erro ao enviar WhatsApp:",e)}n(!1),setTimeout(()=>i(!1),2500)}return s.jsx(l.z,{variant:"outline",size:"sm",onClick:c,disabled:a,className:"flex items-center gap-2",children:a?"Enviando...":o?"Enviado!":(0,s.jsxs)(s.Fragment,{children:[s.jsx(p.Z,{className:"w-4 h-4"})," WhatsApp"]})})}function m(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[p,m]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[N,P]=(0,r.useState)(null);async function C(){i(!0);let e=await fetch("/api/pagamentos");t(await e.json()),i(!1)}function A(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function S(e){return e?new Date(e).toLocaleDateString("pt-BR"):"â€”"}(0,r.useEffect)(()=>{C()},[]);let k=(0,r.useMemo)(()=>e.filter(e=>{let t=p.trim().toLowerCase(),a=!t||e.descricao.toLowerCase().includes(t)||(e.aluno?.nome||"").toLowerCase().includes(t)||(e.responsavel?.nome||"").toLowerCase().includes(t),s=!g||e.status.toUpperCase()===g.toUpperCase(),r=new Date(e.vencimento),n=!v||r>=new Date(v+"T00:00:00"),l=!y||r<=new Date(y+"T23:59:59");return a&&s&&n&&l}),[e,p,g,v,y]),R=(0,r.useMemo)(()=>{let e=0,t=0,a=0,s=0;return k.forEach(r=>{let n=r.valor??0;e+=n;let l=r.status.toUpperCase();"PAGO"===l?t+=n:"ATRASADO"===l?s+=n:a+=n}),{total:e,pago:t,pendente:a,atrasado:s}},[k]);async function D(e){confirm("Deseja marcar esta cobran\xe7a como PAGA?")&&(await fetch(`/api/pagamentos/${e}`,{method:"PUT",body:JSON.stringify({status:"PAGO"})}),await C())}return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-slate-100 flex items-center gap-2",children:[s.jsx(c.Z,{className:"h-5 w-5 text-yellow-400"}),"Financeiro geral"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Acompanhe todas as cobran\xe7as: status, valores, vencimentos e situa\xe7\xe3o por aluno/respons\xe1vel."})]}),s.jsx(l.z,{variant:"primary",onClick:C,disabled:a,className:"flex items-center gap-2",children:"Atualizar dados"})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsx(b,{titulo:"Total lan\xe7ado",valor:R.total}),s.jsx(b,{titulo:"Recebido",valor:R.pago}),s.jsx(b,{titulo:"Pendente",valor:R.pendente}),s.jsx(b,{titulo:"Em atraso",valor:R.atrasado})]}),s.jsx(n.Zb,{className:"p-4 bg-slate-900 border border-slate-700 space-y-4",children:"..."}),s.jsx(n.Zb,{className:"p-0 bg-slate-900 border border-slate-700 overflow-hidden",children:a?s.jsx("p",{className:"p-4 text-sm text-slate-400",children:"Carregando cobran\xe7as..."}):0===k.length?s.jsx("p",{className:"p-4 text-sm text-slate-400",children:"Nenhuma cobran\xe7a encontrada."}):s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:"..."}),s.jsx("tbody",{children:k.map(e=>(0,s.jsxs)("tr",{className:"border-t border-slate-800 hover:bg-slate-800/50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-100",children:e.descricao}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:e.aluno?.nome??"â€”"}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:e.responsavel?.nome??"â€”"}),s.jsx("td",{className:"px-4 py-3 text-slate-400",children:S(e.vencimento)}),s.jsx("td",{className:"px-4 py-3 text-slate-100",children:A(e.valor)}),s.jsx("td",{className:"px-4 py-3",children:function(e){let t=e?.toUpperCase();return"PAGO"===t?s.jsx(o.C,{variant:"success",children:"Pago"}):"ATRASADO"===t?s.jsx(o.C,{variant:"danger",children:"Atrasado"}):"PENDENTE"===t?s.jsx(o.C,{variant:"warning",children:"Pendente"}):s.jsx(o.C,{variant:"outline",children:e})}(e.status)}),s.jsx("td",{className:"px-4 py-3 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsxs)(l.z,{size:"sm",variant:"secondary",onClick:()=>P(e),children:[s.jsx(d,{className:"h-3 w-3"})," Ver"]}),"PAGO"!==e.status.toUpperCase()&&(0,s.jsxs)(l.z,{size:"sm",variant:"primary",onClick:()=>D(e.id),children:[s.jsx(x.Z,{className:"h-3 w-3"})," Pago"]}),s.jsx(u,{numero:e.responsavel?.telefone||"",mensagem:`Ol\xe1 ${e.responsavel?.nome},

Lembrete da cobran\xe7a:
${e.descricao}
Valor: R$ ${A(e.valor)}
Vencimento: ${S(e.vencimento)}

PIX:
${e.pixPayload??"Acesse o portal para ver."}`})]})})]},e.id))})]})})}),N&&s.jsx(h,{pagamento:N,onClose:()=>P(null)})]})}function b({titulo:e,valor:t}){return s.jsx(n.Zb,{className:"p-4 bg-slate-900 border border-slate-700 flex flex-col justify-between",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wide",children:e}),s.jsx("p",{className:"mt-2 text-lg font-bold text-slate-100",children:t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),s.jsx(c.Z,{className:"h-5 w-5 text-yellow-400"})]})})}function h({pagamento:e,onClose:t}){function a(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function r(e){return new Date(e).toLocaleDateString("pt-BR")}return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)(n.Zb,{className:"w-full max-w-md p-6 bg-slate-900 border border-slate-700 space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Detalhes da cobran\xe7a"}),(0,s.jsxs)("p",{className:"text-sm text-slate-300",children:[s.jsx("strong",{children:"Descri\xe7\xe3o:"})," ",e.descricao]}),(0,s.jsxs)("p",{className:"text-sm text-slate-300",children:[s.jsx("strong",{children:"Aluno:"})," ",e.aluno?.nome??"â€”"]}),(0,s.jsxs)("p",{className:"text-sm text-slate-300",children:[s.jsx("strong",{children:"Respons\xe1vel:"})," ",e.responsavel?.nome??"â€”"]}),(0,s.jsxs)("p",{className:"text-sm text-slate-300",children:[s.jsx("strong",{children:"Vencimento:"})," ",r(e.vencimento)]}),(0,s.jsxs)("p",{className:"text-sm text-slate-300",children:[s.jsx("strong",{children:"Valor:"})," ",a(e.valor)]}),(0,s.jsxs)("p",{className:"text-sm text-slate-300",children:[s.jsx("strong",{children:"Status:"})," ",e.status]}),e.boletoUrl&&s.jsx("a",{href:e.boletoUrl,target:"_blank",rel:"noreferrer",className:"text-xs text-yellow-400 underline",children:"Abrir boleto banc\xe1rio"}),e.pixQrCode&&s.jsx("img",{src:e.pixQrCode,alt:"QR Code PIX",className:"w-40 mx-auto"}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 mt-4",children:[e.pixPayload&&s.jsx(l.z,{variant:"secondary",onClick:()=>navigator.clipboard.writeText(e.pixPayload),children:"Copiar c\xf3digo PIX"}),s.jsx(i.T,{numero:e.responsavel?.telefone||"",nomeResponsavel:e.responsavel?.nome||"Respons\xe1vel",nomeAluno:e.aluno?.nome||"",descricao:e.descricao,valor:a(e.valor),vencimento:r(e.vencimento),pixPayload:e.pixPayload})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsx(l.z,{variant:"secondary",onClick:t,children:"Fechar"})})]})})}},6826:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var s=a(95344),r=a(3729),n=a(16212),l=a(36135);function o({numero:e,nomeResponsavel:t,nomeAluno:a,descricao:o,valor:i,vencimento:c,pixPayload:d}){let[x,p]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1);async function b(){if(!e){alert("Respons\xe1vel n\xe3o possui telefone cadastrado.");return}p(!0),m(!1);let s=`
Ol\xe1 ${t}!

Segue novamente os dados da cobran\xe7a:

ðŸ“Œ ${o}
ðŸ‘¦ Aluno: ${a??"â€”"}
ðŸ’° Valor: ${i}
ðŸ“… Vencimento: ${c}

ðŸ”— C\xf3digo PIX:
${d??"Acesse o portal para visualizar."}

Qualquer d\xfavida estamos \xe0 disposi\xe7\xe3o!
  `.trim();try{(await fetch("/api/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero:e,mensagem:s})})).ok&&m(!0)}catch(e){console.error(e)}p(!1),setTimeout(()=>m(!1),2e3)}return s.jsx(n.z,{size:"sm",variant:"primary",onClick:b,disabled:x,className:"flex items-center gap-1",children:x?"Enviando...":u?"Enviado!":(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Z,{className:"h-3 w-3"})," Reenviar PIX"]})})}},69436:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var s=a(95344);a(3729);var r=a(91626);function n({className:e,variant:t="default",...a}){return s.jsx("span",{className:(0,r.cn)("inline-flex items-center rounded-full px-2.5 py-0.5","text-[11px] font-medium uppercase tracking-wide",{default:"bg-slate-800 text-slate-100 border border-slate-700",outline:"bg-transparent text-slate-200 border border-slate-500",success:"bg-emerald-600/20 text-emerald-300 border border-emerald-500/50",warning:"bg-amber-500/15 text-amber-300 border border-amber-400/70",danger:"bg-red-500/15 text-red-300 border border-red-400/70"}[t],e),role:"status",...a})}},16212:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});var s=a(95344);a(3729);var r=a(91626);function n({className:e,variant:t="primary",size:a="default",...n}){return s.jsx("button",{className:(0,r.cn)("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all select-none","focus:outline-none focus:ring-2 focus:ring-yellow-500/70 focus:ring-offset-2 focus:ring-offset-slate-950","disabled:cursor-not-allowed disabled:opacity-70",{primary:"bg-yellow-500 text-slate-900 hover:bg-yellow-400 disabled:bg-yellow-700/60 disabled:text-slate-400",secondary:"bg-slate-700 text-slate-100 hover:bg-slate-600 disabled:bg-slate-800/70 disabled:text-slate-400",ghost:"bg-transparent text-slate-200 hover:bg-slate-800/40 disabled:text-slate-500 disabled:hover:bg-transparent",danger:"bg-red-500 text-white hover:bg-red-400 disabled:bg-red-700/70 disabled:text-red-300",destructive:"bg-red-700 text-white hover:bg-red-600 disabled:bg-red-900/60 disabled:text-red-300",success:"bg-green-600 text-white hover:bg-green-500 disabled:bg-green-800/60 disabled:text-green-200",warning:"bg-orange-500 text-white hover:bg-orange-400 disabled:bg-orange-700/60 disabled:text-orange-200",outline:"border border-slate-600 text-slate-200 hover:bg-slate-800/30 disabled:opacity-50 disabled:hover:bg-transparent",link:"underline underline-offset-2 text-yellow-400 hover:text-yellow-300 p-0 bg-transparent disabled:text-yellow-600",soft:"bg-yellow-500/15 text-yellow-400 hover:bg-yellow-500/25 disabled:opacity-50 disabled:text-yellow-600"}[t],{sm:"h-8 px-3 text-xs",default:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[a],e),...n})}},61351:(e,t,a)=>{"use strict";a.d(t,{Zb:()=>n});var s=a(95344);a(3729);var r=a(91626);function n({className:e,...t}){return s.jsx("div",{className:(0,r.cn)("rounded-2xl border border-slate-800 bg-slate-900/80 backdrop-blur-sm","p-4 shadow-md shadow-black/40 transition","hover:shadow-lg hover:shadow-black/50",e),...t})}},36135:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},7105:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let s=(0,a(86843).createProxy)(String.raw`D:\fut7\app\painel\financeiro\page.tsx`),{__esModule:r,$$typeof:n}=s,l=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[1638,3638,1476,9569,2677],()=>a(35393));module.exports=s})();