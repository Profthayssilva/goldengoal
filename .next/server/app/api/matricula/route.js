"use strict";(()=>{var e={};e.id=5401,e.ids=[5401],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},21922:(e,r,a)=>{a.r(r),a.d(r,{headerHooks:()=>h,originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>_,staticGenerationBailout:()=>g});var o={};a.r(o),a.d(o,{POST:()=>c});var n=a(95419),t=a(69108),l=a(99678),i=a(78070),s=a(9108),u=a(18801);let p=u.Ryn({aluno_nome:u.Z_8().min(2),aluno_nascimento:u.Z_8().optional().nullable(),aluno_serie:u.Z_8().min(1),resp_nome:u.Z_8().min(2),resp_email:u.Z_8().email(),resp_telefone:u.Z_8().optional().nullable(),resp_cpf:u.Z_8().optional().nullable(),resp_endereco:u.Z_8().optional().nullable()});async function c(e){try{let r=await e.json(),a=p.parse(r),o=await s.prisma.preMatricula.create({data:{alunoNome:a.aluno_nome,alunoNascimento:a.aluno_nascimento?new Date(a.aluno_nascimento):null,alunoSerie:a.aluno_serie,respNome:a.resp_nome,respEmail:a.resp_email,respTelefone:a.resp_telefone||null,respCpf:a.resp_cpf||null,respEndereco:a.resp_endereco||null}});try{await s.prisma.mensagem.create({data:{titulo:"Nova pr\xe9-matr\xedcula recebida",conteudo:`
Respons\xe1vel: ${a.resp_nome} (${a.resp_email})
Aluno: ${a.aluno_nome} - S\xe9rie: ${a.aluno_serie}
Telefone: ${a.resp_telefone||"-"}
CPF: ${a.resp_cpf||"-"}
Endere\xe7o: ${a.resp_endereco||"-"}
          `.trim(),tipoEnvio:"interno",destino:"gestores"}})}catch(e){console.error("Erro ao criar mensagem de notifica\xe7\xe3o:",e)}return i.default.json({ok:!0,id:o.id})}catch(e){return console.error(e),i.default.json({error:"Erro ao processar pr\xe9-matr\xedcula"},{status:400})}}let m=new n.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/matricula/route",pathname:"/api/matricula",filename:"route",bundlePath:"app/api/matricula/route"},resolvedPagePath:"D:\\fut7\\app\\api\\matricula\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:_,serverHooks:f,headerHooks:h,staticGenerationBailout:g}=m,v="/api/matricula/route";function x(){return(0,l.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:_})}},9108:(e,r,a)=>{a.d(r,{Z:()=>n});let o=require("@prisma/client"),n=globalThis.prisma??new o.PrismaClient({log:["query","error","warn"]})}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),o=r.X(0,[1638,6206,8801],()=>a(21922));module.exports=o})();