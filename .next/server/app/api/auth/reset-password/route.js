"use strict";(()=>{var e={};e.id=9436,e.ids=[9436],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},8781:(e,r,a)=>{a.r(r),a.d(r,{headerHooks:()=>f,originalPathname:()=>Z,patchFetch:()=>P,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>v});var t={};a.r(t),a.d(t,{POST:()=>p});var o=a(95419),i=a(69108),s=a(99678),n=a(78070),u=a(9108),l=a(70207),d=a(7529);async function p(e){try{let r=await e.json(),a=l.S4.safeParse(r);if(!a.success)return n.default.json({error:"Dados inv\xe1lidos."},{status:400});let{token:t,password:o}=a.data,i=await u.Z.verificationToken.findUnique({where:{token:t}});if(!i||i.expires<new Date)return n.default.json({error:"Token inv\xe1lido ou expirado."},{status:400});let s=await d.ZP.hash(o,10);return await u.Z.user.update({where:{email:i.identifier},data:{hashedPassword:s}}),await u.Z.verificationToken.delete({where:{token:t}}),n.default.json({ok:!0})}catch(e){return console.error("Reset-password error:",e),n.default.json({error:"Erro interno."},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/reset-password/route",pathname:"/api/auth/reset-password",filename:"route",bundlePath:"app/api/auth/reset-password/route"},resolvedPagePath:"D:\\fut7\\app\\api\\auth\\reset-password\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:c,staticGenerationAsyncStorage:w,serverHooks:h,headerHooks:f,staticGenerationBailout:v}=m,Z="/api/auth/reset-password/route";function P(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:w})}},9108:(e,r,a)=>{a.d(r,{Z:()=>o});let t=require("@prisma/client"),o=globalThis.prisma??new t.PrismaClient({log:["query","error","warn"]})},70207:(e,r,a)=>{a.d(r,{S4:()=>i,ek:()=>o});var t=a(18801);t.Ryn({name:t.Z_8().min(2,"Nome obrigat\xf3rio"),email:t.Z_8().email("Email inv\xe1lido"),password:t.Z_8().min(6,"Senha deve ter pelo menos 6 caracteres"),role:t.KmV(["admin","gestor","responsavel"]).optional().default("responsavel")}),t.Ryn({name:t.Z_8().min(2).optional(),email:t.Z_8().email().optional(),role:t.KmV(["admin","gestor","responsavel"]).optional()});let o=t.Ryn({email:t.Z_8().email()}),i=t.Ryn({token:t.Z_8().min(10),password:t.Z_8().min(6)});t.Ryn({currentPassword:t.Z_8().min(6),newPassword:t.Z_8().min(6)})}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[1638,6206,7529,8801],()=>a(8781));module.exports=t})();