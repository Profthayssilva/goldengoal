"use strict";(()=>{var e={};e.id=387,e.ids=[387],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},6005:e=>{e.exports=require("node:crypto")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},10628:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>S,staticGenerationAsyncStorage:()=>q,staticGenerationBailout:()=>P});var a={};t.r(a),t.d(a,{POST:()=>c});var o=t(95419),s=t(69108),n=t(99678),i=t(78070),u=t(9108),p=t(20288),l=t(5988);async function c(e){let{email:r}=await e.json();if(!r)return i.default.json({error:"Email \xe9 obrigat\xf3rio"},{status:400});if(!await u.prisma.user.findUnique({where:{email:r}}))return i.default.json({ok:!0});let t=(0,p.Mb)();await u.prisma.passwordReset.create({data:{email:r,token:t,expiresAt:new Date(Date.now()+18e5)}});let a=`${process.env.APP_URL}/reset/${t}`;return await (0,l._S)(r,a),i.default.json({ok:!0})}let d=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/reset-password/request/route",pathname:"/api/reset-password/request",filename:"route",bundlePath:"app/api/reset-password/request/route"},resolvedPagePath:"D:\\fut7\\app\\api\\reset-password\\request\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:q,serverHooks:S,headerHooks:h,staticGenerationBailout:P}=d,f="/api/reset-password/request/route";function x(){return(0,n.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:q})}},20288:(e,r,t)=>{t.d(r,{Mb:()=>s,c_:()=>n});var a=t(7529),o=t(6113);function s(){return(0,o.randomUUID)()+(0,o.randomUUID)()}function n(e){return a.ZP.hashSync(e,10)}},5988:(e,r,t)=>{t.d(r,{Yb:()=>q,_S:()=>i});var a=t(75180),o=t(68140);let s=process.env.RESEND_API_KEY,n=s?new a.R(s):null;async function i(e,r){let t=`
    <p>Ol\xe1!</p>
    <p>Clique no link abaixo para redefinir sua senha:</p>
    <a href="${r}" target="_blank">${r}</a>
    <p>Este link expira em 30 minutos.</p>
  `;if(n)try{await n.emails.send({from:"no-reply@goldengoal.com",to:e,subject:"Recupera\xe7\xe3o de senha",html:t});return}catch(e){console.error("[mail] ERRO ao enviar via Resend, tentando SMTP:",e)}await q({to:e,subject:"Recupera\xe7\xe3o de senha",html:t})}let u=process.env.SMTP_HOST,p=Number(process.env.SMTP_PORT||587),l=process.env.SMTP_USER,c=process.env.SMTP_PASS,d=process.env.SMTP_FROM||"no-reply@goldengoal.com",m=null;async function q(e){if(!m){console.warn("[mail] Tentativa de enviar email SEM SMTP configurado:",e);return}try{await m.sendMail({from:d,to:e.to,subject:e.subject,html:e.html})}catch(e){console.error("[mail] Erro ao enviar via SMTP:",e)}}u&&l&&c?m=o.createTransport({host:u,port:p,secure:465===p,auth:{user:l,pass:c}}):console.warn("[mail] SMTP N\xc3O configurado. Configure SMTP_HOST, SMTP_USER, SMTP_PASS no .env")},9108:(e,r,t)=>{t.d(r,{Z:()=>o});let a=require("@prisma/client"),o=globalThis.prisma??new a.PrismaClient({log:["query","error","warn"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206,7529,527],()=>t(10628));module.exports=a})();