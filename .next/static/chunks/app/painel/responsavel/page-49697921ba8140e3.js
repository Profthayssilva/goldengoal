(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{69804:function(e,s,a){Promise.resolve().then(a.bind(a,97448))},61834:function(e,s,a){"use strict";a.d(s,{Z:function(){return c}});var t=a(3827),l=a(64090),r=a(56288),n=a(27815),o=a(45179),i=a(85754);function c(e){let{onClose:s,onSaved:a}=e,[c,d]=(0,l.useState)({nome:"",email:"",telefone:"",cpf:"",endereco:""}),[u,x]=(0,l.useState)(!1);function f(e,s){d(a=>({...a,[e]:s}))}async function h(){if(!c.nome||!c.email){r.toast.warning("Nome e email s\xe3o obrigat\xf3rios.");return}try{if(x(!0),!(await fetch("/api/responsaveis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok){r.toast.error("Erro ao criar respons\xe1vel.");return}r.toast.success("Respons\xe1vel criado com sucesso!"),a(),s()}catch(e){console.error(e),r.toast.error("Erro inesperado ao salvar.")}finally{x(!1)}}return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,t.jsxs)(n.Zb,{className:"p-6 w-full max-w-md space-y-4 bg-slate-900 border border-slate-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Novo Respons\xe1vel"}),(0,t.jsx)(o.I,{placeholder:"Nome *",value:c.nome,onChange:e=>f("nome",e.target.value)}),(0,t.jsx)(o.I,{placeholder:"Email *",type:"email",value:c.email,onChange:e=>f("email",e.target.value)}),(0,t.jsx)(o.I,{placeholder:"Telefone",value:c.telefone,onChange:e=>f("telefone",e.target.value)}),(0,t.jsx)(o.I,{placeholder:"CPF",value:c.cpf,onChange:e=>f("cpf",e.target.value)}),(0,t.jsx)(o.I,{placeholder:"Endere\xe7o",value:c.endereco,onChange:e=>f("endereco",e.target.value)}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-3",children:[(0,t.jsx)(i.z,{variant:"secondary",onClick:s,children:"Cancelar"}),(0,t.jsx)(i.z,{variant:"primary",disabled:u,onClick:h,children:u?"Salvando...":"Salvar"})]})]})})}},97448:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(3827),l=a(64090),r=a(56288),n=a(27815),o=a(85754),i=a(61834),c=a(45179);function d(e){var s,a,i,d,u;let{responsavel:x,onClose:f,onSaved:h}=e,[b,p]=(0,l.useState)({nome:null!==(s=x.nome)&&void 0!==s?s:"",email:null!==(a=x.email)&&void 0!==a?a:"",telefone:null!==(i=x.telefone)&&void 0!==i?i:"",cpf:null!==(d=x.cpf)&&void 0!==d?d:"",endereco:null!==(u=x.endereco)&&void 0!==u?u:""}),[m,v]=(0,l.useState)(!1);function g(e,s){p(a=>({...a,[e]:s}))}async function j(){if(!b.nome||!b.email){r.toast.warning("Nome e email s\xe3o obrigat\xf3rios.");return}try{if(v(!0),!(await fetch("/api/responsaveis/".concat(x.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok){r.toast.error("Erro ao atualizar respons\xe1vel.");return}r.toast.success("Respons\xe1vel atualizado com sucesso!"),h(),f()}catch(e){console.error(e),r.toast.error("Erro inesperado ao salvar altera\xe7\xf5es.")}finally{v(!1)}}return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,t.jsxs)(n.Zb,{className:"p-6 w-full max-w-md space-y-4 bg-slate-900 border border-slate-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Editar Respons\xe1vel"}),(0,t.jsx)(c.I,{placeholder:"Nome *",value:b.nome,onChange:e=>g("nome",e.target.value)}),(0,t.jsx)(c.I,{placeholder:"Email *",type:"email",value:b.email,onChange:e=>g("email",e.target.value)}),(0,t.jsx)(c.I,{placeholder:"Telefone",value:b.telefone,onChange:e=>g("telefone",e.target.value)}),(0,t.jsx)(c.I,{placeholder:"CPF",value:b.cpf,onChange:e=>g("cpf",e.target.value)}),(0,t.jsx)(c.I,{placeholder:"Endere\xe7o",value:b.endereco,onChange:e=>g("endereco",e.target.value)}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-3",children:[(0,t.jsx)(o.z,{variant:"secondary",onClick:f,children:"Cancelar"}),(0,t.jsx)(o.z,{variant:"primary",disabled:m,onClick:j,children:m?"Salvando...":"Salvar altera\xe7\xf5es"})]})]})})}function u(e){let{responsavel:s,onClose:a,onDeleted:i}=e,[c,d]=(0,l.useState)(!1);async function u(){try{if(d(!0),!(await fetch("/api/responsaveis/".concat(s.id),{method:"DELETE"})).ok){r.toast.error("Erro ao excluir o respons\xe1vel.");return}r.toast.success("Respons\xe1vel exclu\xeddo com sucesso!"),i(),a()}catch(e){console.error(e),r.toast.error("Erro inesperado ao excluir respons\xe1vel.")}finally{d(!1)}}return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,t.jsxs)(n.Zb,{className:"w-full max-w-sm p-6 bg-slate-900 border border-slate-700 space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-100",children:"Excluir respons\xe1vel"}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:["Tem certeza que deseja excluir"," ",(0,t.jsx)("span",{className:"font-semibold text-yellow-400",children:s.nome}),"?",(0,t.jsx)("br",{}),"Essa a\xe7\xe3o ",(0,t.jsx)("strong",{className:"text-red-400",children:"n\xe3o pode ser desfeita"}),"."]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,t.jsx)(o.z,{variant:"secondary",onClick:a,children:"Cancelar"}),(0,t.jsx)(o.z,{variant:"danger",disabled:c,onClick:u,children:c?"Excluindo...":"Excluir"})]})]})})}function x(){let[e,s]=(0,l.useState)([]),[a,c]=(0,l.useState)(!0),[x,f]=(0,l.useState)(!1),[h,b]=(0,l.useState)(null),[p,m]=(0,l.useState)(null);async function v(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{c(!0);let a=await fetch("/api/responsaveis");if(!a.ok)throw Error("Erro ao carregar respons\xe1veis");let t=await a.json();s(t),e&&r.toast.success("Lista atualizada")}catch(e){console.error(e),r.toast.error("Falha ao carregar respons\xe1veis")}finally{c(!1)}}return(0,l.useEffect)(()=>{v()},[]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-100",children:"Respons\xe1veis"}),(0,t.jsx)(o.z,{onClick:()=>{f(!0)},children:"+ Novo"})]}),(0,t.jsx)(n.Zb,{className:"p-4 bg-slate-900 border border-slate-700",children:a?(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Carregando..."}):0===e.length?(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Nenhum respons\xe1vel cadastrado ainda."}):(0,t.jsxs)("table",{className:"w-full text-sm text-slate-300",children:[(0,t.jsx)("thead",{className:"text-slate-400 border-b border-slate-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left py-2",children:"Nome"}),(0,t.jsx)("th",{className:"text-left py-2",children:"Email"}),(0,t.jsx)("th",{className:"text-left py-2",children:"Telefone"}),(0,t.jsx)("th",{className:"text-left py-2",children:"A\xe7\xf5es"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b border-slate-800",children:[(0,t.jsx)("td",{className:"py-2",children:e.nome}),(0,t.jsx)("td",{children:e.email}),(0,t.jsx)("td",{children:e.telefone}),(0,t.jsx)("td",{className:"py-2",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.z,{variant:"secondary",onClick:()=>b(e),children:"Editar"}),(0,t.jsx)(o.z,{variant:"danger",onClick:()=>m(e),children:"Excluir"})]})})]},e.id))})]})}),x&&(0,t.jsx)(i.Z,{onClose:()=>f(!1),onSaved:()=>{r.toast.success("Respons\xe1vel criado com sucesso!"),v()}}),h&&(0,t.jsx)(d,{responsavel:h,onClose:()=>b(null),onSaved:()=>{r.toast.success("Respons\xe1vel atualizado!"),v()}}),p&&(0,t.jsx)(u,{responsavel:p,onClose:()=>m(null),onDeleted:()=>{r.toast.success("Respons\xe1vel exclu\xeddo!"),v()}})]})}},85754:function(e,s,a){"use strict";a.d(s,{z:function(){return r}});var t=a(3827);a(64090);var l=a(1657);function r(e){let{className:s,variant:a="primary",size:r="default",...n}=e;return(0,t.jsx)("button",{className:(0,l.cn)("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all select-none","focus:outline-none focus:ring-2 focus:ring-yellow-500/70 focus:ring-offset-2 focus:ring-offset-slate-950","disabled:cursor-not-allowed disabled:opacity-70",{primary:"bg-yellow-500 text-slate-900 hover:bg-yellow-400 disabled:bg-yellow-700/60 disabled:text-slate-400",secondary:"bg-slate-700 text-slate-100 hover:bg-slate-600 disabled:bg-slate-800/70 disabled:text-slate-400",ghost:"bg-transparent text-slate-200 hover:bg-slate-800/40 disabled:text-slate-500 disabled:hover:bg-transparent",danger:"bg-red-500 text-white hover:bg-red-400 disabled:bg-red-700/70 disabled:text-red-300",destructive:"bg-red-700 text-white hover:bg-red-600 disabled:bg-red-900/60 disabled:text-red-300",success:"bg-green-600 text-white hover:bg-green-500 disabled:bg-green-800/60 disabled:text-green-200",warning:"bg-orange-500 text-white hover:bg-orange-400 disabled:bg-orange-700/60 disabled:text-orange-200",outline:"border border-slate-600 text-slate-200 hover:bg-slate-800/30 disabled:opacity-50 disabled:hover:bg-transparent",link:"underline underline-offset-2 text-yellow-400 hover:text-yellow-300 p-0 bg-transparent disabled:text-yellow-600",soft:"bg-yellow-500/15 text-yellow-400 hover:bg-yellow-500/25 disabled:opacity-50 disabled:text-yellow-600"}[a],{sm:"h-8 px-3 text-xs",default:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[r],s),...n})}},27815:function(e,s,a){"use strict";a.d(s,{Zb:function(){return r}});var t=a(3827);a(64090);var l=a(1657);function r(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("rounded-2xl border border-slate-800 bg-slate-900/80 backdrop-blur-sm","p-4 shadow-md shadow-black/40 transition","hover:shadow-lg hover:shadow-black/50",s),...a})}},45179:function(e,s,a){"use strict";a.d(s,{I:function(){return r}});var t=a(3827);a(64090);var l=a(1657);function r(e){let{className:s,error:a,...r}=e;return(0,t.jsx)("input",{className:(0,l.cn)("block w-full rounded-lg border bg-slate-900 px-3 py-2 text-sm text-slate-100 shadow-sm","placeholder:text-slate-500","focus:outline-none focus:ring-1",a?"border-red-500 focus:ring-red-500":"border-slate-700 focus:border-yellow-500 focus:ring-yellow-500","disabled:cursor-not-allowed disabled:opacity-60",s),"aria-invalid":a||void 0,...r})}},1657:function(e,s,a){"use strict";a.d(s,{cn:function(){return r}});var t=a(75504),l=a(51367);function r(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.m6)((0,t.W)(s))}}},function(e){e.O(0,[150,288,971,69,744],function(){return e(e.s=69804)}),_N_E=e.O()}]);