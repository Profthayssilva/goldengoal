(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{20933:function(e,t,s){Promise.resolve().then(s.bind(s,89611))},89611:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(3827),r=s(64090),l=s(27815),n=s(85754),d=s(31478);function i(e){var t,s,d,i;let{item:c,onClose:o,onApproved:x}=e,[u,m]=(0,r.useState)(!1);function p(e){return e?new Date(e).toLocaleDateString("pt-BR"):"—"}async function h(){confirm("Confirmar aprova\xe7\xe3o desta pr\xe9-matr\xedcula? Ser\xe1 criado um Aluno e um Respons\xe1vel.")&&(m(!0),await fetch("/api/pre-matriculas/".concat(c.id,"/aprovar"),{method:"POST"}),m(!1),x(),o())}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(l.Zb,{className:"w-full max-w-xl p-6 bg-slate-900 border border-slate-700 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Detalhes da pr\xe9-matr\xedcula"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Aluno"}),(0,a.jsxs)("p",{className:"text-sm text-slate-100",children:["Nome: ",(0,a.jsx)("span",{className:"font-medium",children:c.alunoNome})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["S\xe9rie: ",null!==(t=c.alunoSerie)&&void 0!==t?t:"—"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["Nascimento: ",p(c.alunoNascimento)]})]}),(0,a.jsxs)("div",{className:"space-y-1 pt-2",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Respons\xe1vel"}),(0,a.jsxs)("p",{className:"text-sm text-slate-100",children:["Nome: ",(0,a.jsx)("span",{className:"font-medium",children:c.respNome})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["Email: ",c.respEmail]}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["Telefone: ",null!==(s=c.respTelefone)&&void 0!==s?s:"—"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["CPF: ",null!==(d=c.respCpf)&&void 0!==d?d:"—"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["Endere\xe7o: ",null!==(i=c.respEndereco)&&void 0!==i?i:"—"]})]}),(0,a.jsxs)("div",{className:"space-y-1 pt-2",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Metadados"}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["Criada em: ",p(c.createdAt)]}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:["Status atual:"," ",(0,a.jsx)("span",{className:"font-semibold text-yellow-400",children:c.status})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(n.z,{variant:"secondary",onClick:o,children:"Fechar"}),(0,a.jsx)(n.z,{variant:"primary",disabled:u||"aprovado"===c.status.toLowerCase(),onClick:h,children:u?"Aprovando...":"Aprovar"})]})]})})}function c(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(!0),[o,x]=(0,r.useState)(null);async function u(){c(!0);let e=await fetch("/api/pre-matriculas");t(await e.json()),c(!1)}async function m(e){confirm("Deseja aprovar esta pr\xe9-matr\xedcula e criar Aluno + Respons\xe1vel?")&&(await fetch("/api/pre-matriculas/".concat(e,"/aprovar"),{method:"POST"}),u())}async function p(e){confirm("Tem certeza que deseja excluir esta pr\xe9-matr\xedcula?")&&(await fetch("/api/pre-matriculas/".concat(e),{method:"DELETE"}),u())}return(0,r.useEffect)(()=>{u()},[]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-100",children:"Pr\xe9-matr\xedculas"})}),(0,a.jsx)(l.Zb,{className:"p-4 bg-slate-900 border border-slate-700",children:s?(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Carregando..."}):0===e.length?(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Nenhuma pr\xe9-matr\xedcula encontrada."}):(0,a.jsxs)("table",{className:"w-full text-sm text-slate-300",children:[(0,a.jsx)("thead",{className:"text-slate-400 border-b border-slate-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-2",children:"Aluno"}),(0,a.jsx)("th",{className:"text-left py-2",children:"S\xe9rie"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Respons\xe1vel"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Email"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Data"}),(0,a.jsx)("th",{className:"text-left py-2",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"border-b border-slate-800",children:[(0,a.jsx)("td",{className:"py-2",children:e.alunoNome}),(0,a.jsx)("td",{children:null!==(t=e.alunoSerie)&&void 0!==t?t:"—"}),(0,a.jsx)("td",{children:e.respNome}),(0,a.jsx)("td",{children:e.respEmail}),(0,a.jsx)("td",{children:function(e){let t=e.toLowerCase();return"aprovado"===t?(0,a.jsx)(d.C,{variant:"success",children:"Aprovado"}):"recusado"===t?(0,a.jsx)(d.C,{variant:"danger",children:"Recusado"}):"em_analise"===t||"analise"===t?(0,a.jsx)(d.C,{variant:"warning",children:"Em an\xe1lise"}):(0,a.jsx)(d.C,{variant:"outline",children:e})}(e.status)}),(0,a.jsx)("td",{children:(s=e.createdAt)?new Date(s).toLocaleDateString("pt-BR"):"—"}),(0,a.jsx)("td",{className:"py-2",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.z,{variant:"secondary",onClick:()=>x(e),children:"Ver"}),(0,a.jsx)(n.z,{variant:"primary",onClick:()=>m(e.id),disabled:"aprovado"===e.status.toLowerCase(),children:"Aprovar"}),(0,a.jsx)(n.z,{variant:"danger",onClick:()=>p(e.id),children:"Excluir"})]})})]},e.id)})})]})}),o&&(0,a.jsx)(i,{item:o,onClose:()=>x(null),onApproved:u})]})}},31478:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var a=s(3827);s(64090);var r=s(1657);function l(e){let{className:t,variant:s="default",...l}=e;return(0,a.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full px-2.5 py-0.5","text-[11px] font-medium uppercase tracking-wide",{default:"bg-slate-800 text-slate-100 border border-slate-700",outline:"bg-transparent text-slate-200 border border-slate-500",success:"bg-emerald-600/20 text-emerald-300 border border-emerald-500/50",warning:"bg-amber-500/15 text-amber-300 border border-amber-400/70",danger:"bg-red-500/15 text-red-300 border border-red-400/70"}[s],t),role:"status",...l})}},85754:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var a=s(3827);s(64090);var r=s(1657);function l(e){let{className:t,variant:s="primary",size:l="default",...n}=e;return(0,a.jsx)("button",{className:(0,r.cn)("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all select-none","focus:outline-none focus:ring-2 focus:ring-yellow-500/70 focus:ring-offset-2 focus:ring-offset-slate-950","disabled:cursor-not-allowed disabled:opacity-70",{primary:"bg-yellow-500 text-slate-900 hover:bg-yellow-400 disabled:bg-yellow-700/60 disabled:text-slate-400",secondary:"bg-slate-700 text-slate-100 hover:bg-slate-600 disabled:bg-slate-800/70 disabled:text-slate-400",ghost:"bg-transparent text-slate-200 hover:bg-slate-800/40 disabled:text-slate-500 disabled:hover:bg-transparent",danger:"bg-red-500 text-white hover:bg-red-400 disabled:bg-red-700/70 disabled:text-red-300",destructive:"bg-red-700 text-white hover:bg-red-600 disabled:bg-red-900/60 disabled:text-red-300",success:"bg-green-600 text-white hover:bg-green-500 disabled:bg-green-800/60 disabled:text-green-200",warning:"bg-orange-500 text-white hover:bg-orange-400 disabled:bg-orange-700/60 disabled:text-orange-200",outline:"border border-slate-600 text-slate-200 hover:bg-slate-800/30 disabled:opacity-50 disabled:hover:bg-transparent",link:"underline underline-offset-2 text-yellow-400 hover:text-yellow-300 p-0 bg-transparent disabled:text-yellow-600",soft:"bg-yellow-500/15 text-yellow-400 hover:bg-yellow-500/25 disabled:opacity-50 disabled:text-yellow-600"}[s],{sm:"h-8 px-3 text-xs",default:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[l],t),...n})}},27815:function(e,t,s){"use strict";s.d(t,{Zb:function(){return l}});var a=s(3827);s(64090);var r=s(1657);function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("rounded-2xl border border-slate-800 bg-slate-900/80 backdrop-blur-sm","p-4 shadow-md shadow-black/40 transition","hover:shadow-lg hover:shadow-black/50",t),...s})}},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(75504),r=s(51367);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[150,971,69,744],function(){return e(e.s=20933)}),_N_E=e.O()}]);