(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[801],{55529:function(e,t,a){Promise.resolve().then(a.bind(a,45346))},45346:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(3827),r=a(64090),l=a(27815),n=a(85754),i=a(45179),o=a(31478),d=a(57977);let c=(0,d.Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),u=(0,d.Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),x=(0,d.Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),h=(0,d.Z)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),m=(0,d.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),p=["ADMIN","GESTOR","FINANCEIRO","PROFESSOR","RESPONSAVEL"];function b(){let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[m,b]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(!1),[C,k]=(0,r.useState)(null);async function S(){d(!0);let e=await fetch("/api/users");t(await e.json()),d(!1)}(0,r.useEffect)(()=>{S()},[]);let E=(0,r.useMemo)(()=>e.filter(e=>{let t=0===m.trim().length||(e.name||"").toLowerCase().includes(m.toLowerCase())||(e.email||"").toLowerCase().includes(m.toLowerCase()),a=!j||e.role.toUpperCase()===j.toUpperCase();return t&&a}),[e,m,j]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-slate-100 flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-5 w-5 text-yellow-400"}),"Administra\xe7\xe3o de Usu\xe1rios"]}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Controle de acesso ao painel: admin, gestor, financeiro, professor e respons\xe1veis."})]}),(0,s.jsxs)(n.z,{variant:"primary",className:"flex items-center gap-2",onClick:()=>w(!0),children:[(0,s.jsx)(u,{className:"h-4 w-4"}),"Novo usu\xe1rio"]})]}),(0,s.jsx)(l.Zb,{className:"p-4 bg-slate-900 border border-slate-700 space-y-3",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(x,{className:"h-4 w-4 text-slate-400 absolute left-2 top-2.5"}),(0,s.jsx)(i.I,{placeholder:"Buscar por nome ou e-mail",className:"pl-8",value:m,onChange:e=>b(e.target.value)})]}),(0,s.jsxs)("select",{className:"w-40 rounded-md border border-slate-700 bg-slate-800 p-2 text-sm text-slate-100",value:j,onChange:e=>y(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Todos os perfis"}),p.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-500",children:[E.length," usu\xe1rio(s) encontrados"]})]})}),(0,s.jsx)(l.Zb,{className:"p-0 bg-slate-900 border border-slate-700 overflow-hidden",children:a?(0,s.jsx)("p",{className:"p-4 text-sm text-slate-400",children:"Carregando usu\xe1rios..."}):0===E.length?(0,s.jsx)("p",{className:"p-4 text-sm text-slate-400",children:"Nenhum usu\xe1rio encontrado com os filtros atuais."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-slate-950/60",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-slate-400 font-medium",children:"Nome"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-slate-400 font-medium",children:"E-mail"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-slate-400 font-medium",children:"Perfil"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-slate-400 font-medium",children:"Criado em"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-slate-400 font-medium",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:E.map(e=>{var t,a;return(0,s.jsxs)("tr",{className:"border-t border-slate-800 hover:bg-slate-800/50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-slate-100",children:null!==(t=e.name)&&void 0!==t?t:"—"}),(0,s.jsx)("td",{className:"px-4 py-3 text-slate-300",children:null!==(a=e.email)&&void 0!==a?a:"—"}),(0,s.jsx)("td",{className:"px-4 py-3",children:function(e){let t=e.toUpperCase();return"ADMIN"===t?(0,s.jsx)(o.C,{variant:"destructive",children:"ADMIN"}):"GESTOR"===t?(0,s.jsx)(o.C,{variant:"default",children:"GESTOR"}):"FINANCEIRO"===t?(0,s.jsx)(o.C,{variant:"secondary",children:"FINANCEIRO"}):"PROFESSOR"===t?(0,s.jsx)(o.C,{variant:"outline",children:"PROFESSOR"}):(0,s.jsx)(o.C,{variant:"outline",children:"RESPONS\xc1VEL"})}(e.role)}),(0,s.jsx)("td",{className:"px-4 py-3 text-slate-400",children:new Date(e.createdAt).toLocaleDateString("pt-BR")}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsxs)(n.z,{size:"sm",variant:"secondary",onClick:()=>k(e),className:"flex items-center gap-1",children:[(0,s.jsx)(h,{className:"h-3 w-3"}),"Editar"]}),(0,s.jsx)(f,{id:e.id,onDeleted:S})]})})]},e.id)})})]})})}),N&&(0,s.jsx)(g,{onClose:()=>w(!1),onSaved:S}),C&&(0,s.jsx)(v,{user:C,onClose:()=>k(null),onSaved:S})]})}function f(e){let{id:t,onDeleted:a}=e,[l,i]=(0,r.useState)(!1);async function o(){if(!confirm("Tem certeza que deseja excluir este usu\xe1rio?"))return;i(!0);let e=await fetch("/api/users/".concat(t),{method:"DELETE"});i(!1),e.ok?a():alert("Erro ao excluir usu\xe1rio")}return(0,s.jsxs)(n.z,{size:"sm",variant:"destructive",onClick:o,disabled:l,className:"flex items-center gap-1",children:[(0,s.jsx)(m,{className:"h-3 w-3"}),l?"Excluindo...":"Excluir"]})}function g(e){let{onClose:t,onSaved:a}=e,[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[x,h]=(0,r.useState)("RESPONSAVEL"),[m,b]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)("");async function y(){g(!0),j("");let e=await fetch("/api/users",{method:"POST",body:JSON.stringify({name:o,email:c,role:x,password:m||void 0})});if(!e.ok){j((await e.json().catch(()=>({}))).error||"Erro ao criar usu\xe1rio"),g(!1);return}g(!1),a(),t()}return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)(l.Zb,{className:"w-full max-w-md p-6 bg-slate-900 border border-slate-700 space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-100",children:"Novo usu\xe1rio"}),(0,s.jsx)(i.I,{placeholder:"Nome completo",value:o,onChange:e=>d(e.target.value)}),(0,s.jsx)(i.I,{placeholder:"E-mail",value:c,onChange:e=>u(e.target.value)}),(0,s.jsx)("select",{className:"w-full rounded-md border border-slate-700 bg-slate-800 p-2 text-sm text-slate-100",value:x,onChange:e=>h(e.target.value),children:p.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(i.I,{placeholder:"Senha inicial (opcional)",type:"password",value:m,onChange:e=>b(e.target.value)}),v&&(0,s.jsx)("p",{className:"text-xs text-red-400",children:v}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,s.jsx)(n.z,{variant:"secondary",onClick:t,children:"Cancelar"}),(0,s.jsx)(n.z,{variant:"primary",disabled:f,onClick:y,children:f?"Salvando...":"Salvar"})]})]})})}function v(e){let{user:t,onClose:a,onSaved:o}=e,[d,c]=(0,r.useState)(t.name||""),[u,x]=(0,r.useState)(t.email||""),[h,m]=(0,r.useState)(t.role.toUpperCase()),[b,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),[j,y]=(0,r.useState)("");async function N(){v(!0),y("");let e={name:d,email:u,role:h};b.trim().length>0&&(e.password=b);let s=await fetch("/api/users/".concat(t.id),{method:"PUT",body:JSON.stringify(e)});if(!s.ok){y((await s.json().catch(()=>({}))).error||"Erro ao salvar altera\xe7\xf5es"),v(!1);return}v(!1),o(),a()}return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)(l.Zb,{className:"w-full max-w-md p-6 bg-slate-900 border border-slate-700 space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-100",children:"Editar usu\xe1rio"}),(0,s.jsx)(i.I,{placeholder:"Nome",value:d,onChange:e=>c(e.target.value)}),(0,s.jsx)(i.I,{placeholder:"E-mail",value:u,onChange:e=>x(e.target.value)}),(0,s.jsx)("select",{className:"w-full rounded-md border border-slate-700 bg-slate-800 p-2 text-sm text-slate-100",value:h,onChange:e=>m(e.target.value),children:p.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(i.I,{placeholder:"Nova senha (opcional)",type:"password",value:b,onChange:e=>f(e.target.value)}),j&&(0,s.jsx)("p",{className:"text-xs text-red-400",children:j}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,s.jsx)(n.z,{variant:"secondary",onClick:a,children:"Cancelar"}),(0,s.jsx)(n.z,{variant:"primary",disabled:g,onClick:N,children:g?"Salvando...":"Salvar"})]})]})})}},31478:function(e,t,a){"use strict";a.d(t,{C:function(){return l}});var s=a(3827);a(64090);var r=a(1657);function l(e){let{className:t,variant:a="default",...l}=e;return(0,s.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full px-2.5 py-0.5","text-[11px] font-medium uppercase tracking-wide",{default:"bg-slate-800 text-slate-100 border border-slate-700",outline:"bg-transparent text-slate-200 border border-slate-500",success:"bg-emerald-600/20 text-emerald-300 border border-emerald-500/50",warning:"bg-amber-500/15 text-amber-300 border border-amber-400/70",danger:"bg-red-500/15 text-red-300 border border-red-400/70"}[a],t),role:"status",...l})}},85754:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var s=a(3827);a(64090);var r=a(1657);function l(e){let{className:t,variant:a="primary",size:l="default",...n}=e;return(0,s.jsx)("button",{className:(0,r.cn)("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all select-none","focus:outline-none focus:ring-2 focus:ring-yellow-500/70 focus:ring-offset-2 focus:ring-offset-slate-950","disabled:cursor-not-allowed disabled:opacity-70",{primary:"bg-yellow-500 text-slate-900 hover:bg-yellow-400 disabled:bg-yellow-700/60 disabled:text-slate-400",secondary:"bg-slate-700 text-slate-100 hover:bg-slate-600 disabled:bg-slate-800/70 disabled:text-slate-400",ghost:"bg-transparent text-slate-200 hover:bg-slate-800/40 disabled:text-slate-500 disabled:hover:bg-transparent",danger:"bg-red-500 text-white hover:bg-red-400 disabled:bg-red-700/70 disabled:text-red-300",destructive:"bg-red-700 text-white hover:bg-red-600 disabled:bg-red-900/60 disabled:text-red-300",success:"bg-green-600 text-white hover:bg-green-500 disabled:bg-green-800/60 disabled:text-green-200",warning:"bg-orange-500 text-white hover:bg-orange-400 disabled:bg-orange-700/60 disabled:text-orange-200",outline:"border border-slate-600 text-slate-200 hover:bg-slate-800/30 disabled:opacity-50 disabled:hover:bg-transparent",link:"underline underline-offset-2 text-yellow-400 hover:text-yellow-300 p-0 bg-transparent disabled:text-yellow-600",soft:"bg-yellow-500/15 text-yellow-400 hover:bg-yellow-500/25 disabled:opacity-50 disabled:text-yellow-600"}[a],{sm:"h-8 px-3 text-xs",default:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[l],t),...n})}},27815:function(e,t,a){"use strict";a.d(t,{Zb:function(){return l}});var s=a(3827);a(64090);var r=a(1657);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("rounded-2xl border border-slate-800 bg-slate-900/80 backdrop-blur-sm","p-4 shadow-md shadow-black/40 transition","hover:shadow-lg hover:shadow-black/50",t),...a})}},45179:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var s=a(3827);a(64090);var r=a(1657);function l(e){let{className:t,error:a,...l}=e;return(0,s.jsx)("input",{className:(0,r.cn)("block w-full rounded-lg border bg-slate-900 px-3 py-2 text-sm text-slate-100 shadow-sm","placeholder:text-slate-500","focus:outline-none focus:ring-1",a?"border-red-500 focus:ring-red-500":"border-slate-700 focus:border-yellow-500 focus:ring-yellow-500","disabled:cursor-not-allowed disabled:opacity-60",t),"aria-invalid":a||void 0,...l})}},1657:function(e,t,a){"use strict";a.d(t,{cn:function(){return l}});var s=a(75504),r=a(51367);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},57977:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var s=a(64090);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:c="",children:u,iconNode:x,...h}=e;return(0,s.createElement)("svg",{ref:t,...d,width:r,height:r,stroke:a,strokeWidth:n?24*Number(l)/Number(r):l,className:i("lucide",c),...!u&&!o(h)&&{"aria-hidden":"true"},...h},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:o,...d}=a;return(0,s.createElement)(c,{ref:l,iconNode:t,className:i("lucide-".concat(r(n(e))),"lucide-".concat(e),o),...d})});return a.displayName=n(e),a}}},function(e){e.O(0,[150,971,69,744],function(){return e(e.s=55529)}),_N_E=e.O()}]);